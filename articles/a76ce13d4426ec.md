---
title: "HTMLå†…ã«Pythonã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦å®Ÿè¡Œã§ãã‚‹PyScriptã§éŠã‚“ã§ã¿ãŸï¼"
emoji: "ğŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['html', 'python', 'PyScript']
published: true
---

ã“ã‚“ã«ã¡ã¯ğŸ‘‹

æ•°é€±é–“å‰ã€PyScriptãªã‚‹ã‚‚ã®ãŒAnacondaã‹ã‚‰ç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚

https://twitter.com/anacondainc/status/1520447158603890691

ãƒªãƒ³ã‚¯å…ˆã®è¨˜äº‹ãªã©ã‚’èª­ã‚€ã«ã€ã©ã†ã‚„ã‚‰ã€PyScriptã¨ã„ã†ã®ã¯JavaScriptã®ã‚ˆã†ã«HTMLå†…ã«Pythonã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥æ›¸ãã€ãã®å‡¦ç†ã‚’å®Ÿè¡Œã§ãã‚‹ã¨ã„ã†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚‰ã—ã„ã§ã™ã€‚

ä»Šå›ã¯ãã‚“ãªPyScriptã‚’ä½¿ã£ã¦å°‘ã—éŠã‚“ã§ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

:::message
2022/5/22
PyScriptã¯ã¾ã ã‚¢ãƒ«ãƒ•ã‚¡ç‰ˆã§ã€å…¬å¼ã‹ã‚‰ã‚‚ã€Œæœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã¯æ¨å¥¨ã—ã¾ã›ã‚“ã€ã¨ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä»•æ§˜ãªã©ä»Šå›ç´¹ä»‹ã™ã‚‹æ–¹æ³•ã¨ç•°ãªã£ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€ã”æ³¨æ„ãã ã•ã„ã€‚
:::

# PyScriptã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

ãªã‚“ã¨ã“ã®PyScriptã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ã€‚HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®`head`ã‚¿ã‚°å†…ã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ãä½¿ç”¨ã§ãã¾ã™ã€‚

```html
<link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
<script defer src="https://pyscript.net/alpha/pyscript.js"></script>
```

ã¡ãªã¿ã«ã€å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰`pyscript.css`ã¨`pyscript.js`ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦èª­ã¿è¾¼ã‚€ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

# éŠã‚“ã§ã¿ã‚‹

## æ–‡å­—ã®å‡ºåŠ›

ã¾ãšã¯æ–‡å­—ã®å‡ºåŠ›ã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html:index.html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <title>PyScript Playground</title>
  </head>

  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center text-7xl"></p>
      </div>
    </main>

    <py-script output="title">
print('I love PyScript')
    </py-script>
  </body>

</html>
```

å®Ÿéš›ã®ãƒšãƒ¼ã‚¸ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/258a064b4454-20220522.png)

ã¡ã‚ƒã‚“ã¨`I love PyScript`ã®æ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

`body`ã‚¿ã‚°ã®ä¸­ã‚’è¦‹ãªãŒã‚‰å°‘ã—è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html
  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center text-7xl"></p>
      </div>
    </main>
    <py-script output="title">
print('I love PyScript')
    </py-script>
  </body>
```

ã¾ãšã€Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã¯`py-script`ã‚¿ã‚°ã§å›²ã¾ã‚ŒãŸéƒ¨åˆ†ã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¸­ã¯å®Œå…¨ã«Pythonã®ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã®ã§ã€å½“ç„¶ã§ã™ãŒã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚‚ã—ã£ã‹ã‚Šã—ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€`py-script`ã‚¿ã‚°ã®`output`ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€Pythonã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œå†…å®¹ã‚’htmlã®ã©ã®éƒ¨åˆ†ã«è¡¨ç¤ºã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚htmlè¦ç´ ã®`id`ã®å€¤ã‚’ä½¿ç”¨ã—ã¦ä»»æ„ã®è¦ç´ ã«Pythonã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œçµæœã‚’æ¸¡ã™äº‹ãŒã§ãã¾ã™ã€‚ä»Šå›ã®ä¾‹ã§ã¯ã€`<py-script output="title">...</py-script>`ã¨æ›¸ã‹ã‚Œã¦ã‚‹ã®ã§ã€`<p id="title" class="text-center text-7xl"></p>`ã«Pythonã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œçµæœã§ã‚ã‚‹`print('I love PyScript')`ãŒæ¸¡ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã¡ãªã¿ã«ã€`pyscript.write(idã®å€¤, æ¸¡ã—ãŸã„å€¤)`ã¨ã—ã¦ã‚‚åŒã˜çµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```html
<body>
  <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
    <p id="title" class="text-center text-7xl"></p>
    </div>
  </main>
  <py-script output="title">
title = 'I love PyScript'
pyscript.write('title', title)
  </py-script>
</body>
```

ãã—ã¦ã€ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã«ã¤ã„ã¦ã§ã™ãŒã€ã©ã†ã‚„ã‚‰Tailwind CSSã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹åãŒãã®ã¾ã¾ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚ãŸã ã€ã“ã‚Œã«ã¤ã„ã¦ã¯ã©ã“ã‹ã«æ›¸ã„ã¦ã‚ã£ãŸã‚ã‘ã§ã‚‚ãªãã€è‡ªåˆ†ã§æ°—ä»˜ã„ãŸã ã‘ãªã®ã§ã€ã‚‚ã£ã¨èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

## Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†

Pythonã‚³ãƒ¼ãƒ‰ãªã®ã§å½“ç„¶ã§ã™ãŒæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
ãã‚Œã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã€ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã«ã¯`platform`ã‚’ä½¿ç”¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html:index.html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <title>PyScript Playground</title>
  </head>

  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center text-7xl"></p>
    </main>

    <py-script output="title">
import platform # è¿½åŠ 

print('I love PyScript')
print('Python version: {}'.format(platform.python_version())) # è¿½åŠ 
    </py-script>

  </body>

</html>
```

![](https://storage.googleapis.com/zenn-user-upload/65d1aab13b49-20220522.png)

ã¯ã„ã€ã¡ã‚ƒã‚“ã¨Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã‚’åŠ ãˆãŸ`py-script`ã®ä¸­èº«ã«ã¤ã„ã¦è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html
<py-script output="title">
import platform # è¿½åŠ 

print('I love PyScript')
print('Python version: {}'.format(platform.python_version())) # è¿½åŠ 
</py-script>
```

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯`py-script`ã®ä¸­ã§è¡Œã„ã¾ã™ã€‚ãã—ã¦ãã®å¾Œã¯æ™®æ®µã©ãŠã‚Šã«å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã ã‘ã§ã™ã€‚æœ¬å½“ã«Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾æ›¸ã‘ã‚‹ã®ã§ã¨ã¦ã‚‚æ¥½ã§ã™ã€‚

## å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†

Pythonã®å¼·ã¿ã¨ã„ãˆã°å„ªç§€ãªå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã ã¨æ€ã„ã¾ã™ã€‚PyScriptã§ã‚‚ä¸€éƒ¨ã§ã¯ã‚ã‚Šã¾ã™ãŒã€Pythonã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä½¿ç”¨å¯èƒ½ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä»¥ä¸‹ã®Pyodideã®ã‚µã‚¤ãƒˆã§ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€numpyã‚„pandasã€matplotlibã€Pillowã€scikit-learnãªã©ãŒä½¿ç”¨å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚

https://pyodide.org/en/stable/usage/packages-in-pyodide.html

ãã‚Œã§ã¯ã€ä»Šå›ã¯matplotlibã‚’ä½¿ç”¨ã—ã¦ã‚°ãƒ©ãƒ•ã®è¡¨ç¤ºã‚’ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```html:index.html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <!-- è¿½åŠ  ã“ã“ã‹ã‚‰ -->
    <py-env>
      - numpy
      - matplotlib
    </py-env>
    <!-- è¿½åŠ  ã“ã“ã¾ã§ -->
    <title>PyScript Playground</title>
  </head>

  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center"></p>
      <!-- è¿½åŠ  ã“ã“ã‹ã‚‰ -->
      <py-button id="graph-button" label="ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º"></py-button>
      <div id="graph-container"></div>
      <!-- è¿½åŠ  ã“ã“ã¾ã§ -->
    </main>

    <py-script output="title">
import platform

print('I love PyScript')
print('Python version: {}'.format(platform.python_version()))
    </py-script>
    <!-- è¿½åŠ  ã“ã“ã‹ã‚‰ -->
    <py-script>
import numpy as np
from numpy import pi, sin, cos
import matplotlib.pyplot as plt

graph_button = Element('graph-button')

def display_graph(*ags, **kwgs):
    t = np.arange(0,2*pi,0.01)
    x = 16*sin(t)**3
    y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t)
    fig, ax = plt.subplots()
    ax.fill_between(x, y, facecolor='red', alpha=0.5)
    pyscript.write('graph-container', fig)

graph_button.element.onclick = display_graph
    </py-script>
    <!-- è¿½åŠ  ã“ã“ã¾ã§ -->

  </body>

</html>
```
å®Ÿéš›ã«å‹•ã‹ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/45e4503b8576-20220522.gif)

`ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º`ã¨ã„ã†ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ç´ æ•µãªã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã§ã¯ã€è¿½åŠ éƒ¨åˆ†ã®ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html
<py-env>
  - numpy
  - matplotlib
</py-env>
```

ã¾ãšã€`head`ã‚¿ã‚°å†…ã®ã“ã®éƒ¨åˆ†ã§ã™ãŒã€`py-env`ã‚¿ã‚°å†…ã§ã€ä½¿ç”¨ã—ãŸã„å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã‚’è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`py-script`ã‚¿ã‚°å†…ã§ä»»æ„ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

```html
<py-button id="graph-button" label="ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º"></py-button>
<div id="graph-container"></div>
```

æ¬¡ã«ä¸Šè¨˜ã®éƒ¨åˆ†ã€`py-button`ã¨ã„ã†è¦‹æ…£ã‚Œãªã„ã‚¿ã‚°ãŒã‚ã‚Šã¾ã™ãŒã€PyScriptã«ã¯`Visual component tag`ã¨ã„ã†ã™ã§ã«ãƒœã‚¿ãƒ³ã‚„å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®ãŒæ•´ãˆã‚‰ã‚ŒãŸã‚‚ã®ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«å®Ÿè£…ãŒå¯èƒ½ã«ãªã£ã¦ã„ã¦ã€`py-button`ã§ã¯ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰`Visual component tag`ã®ä¸€è¦§ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(ã¾ã ç¨®é¡ã¯å°‘ãªã„ã§ã™ãŒ...)


https://github.com/pyscript/pyscript/blob/main/docs/tutorials/getting-started.md#visual-component-tags

ãã—ã¦ã€`div`ã‚¿ã‚°ã®`id="graph-container"`ã®éƒ¨åˆ†ã‚’è¨˜è¿°ã—ã€ã“ã®ã‚ã¨å®Ÿè¡Œã™ã‚‹Pythonã‚³ãƒ¼ãƒ‰ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ã®ç”¨æ„ã‚’ã—ã¦ã„ã¾ã™ã€‚

```html
  <py-script>
import numpy as np
from numpy import pi, sin, cos
import matplotlib.pyplot as plt

graph_button = Element('graph-button')

def display_graph(*ags, **kwgs):
    t = np.arange(0,2*pi,0.01)
    x = 16*sin(t)**3
    y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t)
    fig, ax = plt.subplots()
    ax.fill_between(x, y, facecolor='red', alpha=0.5)
    pyscript.write('graph-container', fig)

graph_button.element.onclick = display_graph
  </py-script>
```

`py-script`ã‚¿ã‚°å†…ã§ã¯ã¾ãšã€`head`ã‚¿ã‚°å†…ã§è¨˜è¿°ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™ã€‚`graph_button = Element('graph-button')`ã§ãƒœã‚¿ãƒ³è¦ç´ ã®å–å¾—ã‚’è¡Œã„ã€`graph_button.element.onclick = display_graph`ã§ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«`display_graph`é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®éƒ¨åˆ†ã¯ã¾ã•ã«JavaScriptã§è¡Œãˆã‚‹DOMæ“ä½œã£ã¦æ„Ÿã˜ã§æ„Ÿå‹•ã—ã¾ã—ãŸã€‚`display_graph`ã®ä¸­èº«ã¯æ™®é€šã«pltã§ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã€`pyscript.write`ã§æŒ‡å®šã®`div`ã‚¿ã‚°å†…ã«æå†™ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€ç‰¹ã«èª¬æ˜ä¸è¦ã‹ã¨æ€ã„ã¾ã™ãŒã€å··ã§è©±é¡Œã®ä¸‰è§’é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ç´ æ•µãªãƒãƒ¼ãƒˆå‹ã®ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¦ã„ã‚‹ç‚¹ã¯æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## scikit-learnã§ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚‹

Pythonã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹æ–¹ã®ä¸­ã«ã¯ãƒ‡ãƒ¼ã‚¿åˆ†æã‚’ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦ã„ã‚‹æ–¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

ã¨ã„ã†ã‚ã‘ã§ã€scikit-learnã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‹ã‚‰ç‹é“ã®The Iris Datasetã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã®ç¢ºèªã‚„ã‚°ãƒ©ãƒ•ã§ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã‚’è¦‹ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html:index.html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-env>
      - numpy
      - matplotlib
      # è¿½åŠ  ã“ã“ã‹ã‚‰
      - scikit-learn
      - pandas
      # è¿½åŠ ã“ã“ã¾ã§
    </py-env>
    <title>PyScript Playground</title>
  </head>

  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center"></p>
      <py-button id="graph-button" label="ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º"></py-button>
      <div id="graph-container"></div>
      <!-- è¿½åŠ  ã“ã“ã‹ã‚‰ -->
      <py-button id="iris-button" label="Irisãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’åˆ†æ"></py-button>
      <div id="iris-container">
        <p id="data-description"></p>
        <div id="plot-area"></div>
      </div>
      <!-- è¿½åŠ  ã“ã“ã¾ã§ -->
    </main>

    <py-script output="title">
import platform

print('I love PyScript')
print('Python version: {}'.format(platform.python_version()))
    </py-script>
    <py-script>
import numpy as np
from numpy import pi, sin, cos
import matplotlib.pyplot as plt

graph_button = Element('graph-button')

def display_graph(*ags, **kwgs):
    t = np.arange(0,2*pi,0.01)
    x = 16*sin(t)**3
    y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t)
    fig, ax = plt.subplots()
    ax.fill_between(x, y, facecolor='red', alpha=0.5)
    pyscript.write('graph-container', fig)

graph_button.element.onclick = display_graph
    </py-script>
    <!-- è¿½åŠ  ã“ã“ã‹ã‚‰ -->
    <py-script>
from sklearn import datasets
import pandas as pd

iris_button = Element('iris-button')
dataset = datasets.load_iris()

def display_irisdata(*ags, **kwgs):
    df = pd.DataFrame(dataset.data, columns=dataset.feature_names)
    pyscript.write('data-description', df.head())

    fig, ax = plt.subplots()
    ax.scatter(x=dataset.data[dataset.target==0, 0],
              y=dataset.data[dataset.target==0, 1],
              label=dataset.target_names[0],
              c='blue')
    ax.scatter(x=dataset.data[dataset.target==1, 0],
              y=dataset.data[dataset.target==1, 1],
              label=dataset.target_names[1],
              c='red')
    ax.scatter(x=dataset.data[dataset.target==2, 0],
              y=dataset.data[dataset.target==2, 1],
              label=dataset.target_names[2],
              c='green')

    ax.legend(loc='best', fontsize=14)

    ax.set_title('Iris SepalLength / SepalWidth', size=16)
    ax.set_xlabel(dataset.feature_names[0], size=14)
    ax.set_ylabel(dataset.feature_names[1], size=14)
    pyscript.write('plot-area', fig)

iris_button.element.onclick = display_irisdata
    </py-script>
    <!-- è¿½åŠ  ã“ã“ã¾ã§ -->

  </body>

</html>
```

![](https://user-images.githubusercontent.com/43092452/169680521-9e31eecf-1bb4-41d6-88a2-479e71dd1191.gif)

ä»Šã¾ã§ã®èª¬æ˜ã¨åŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã§ã€ç´°ã‹ã„èª¬æ˜ã¯ä¸è¦ã‹ã¨æ€ã„ã¾ã™ãŒã€ç°¡å˜ã«æµã‚Œã‚’èª¬æ˜ã™ã‚‹ã¨ã€`py-env`ã‚¿ã‚°å†…ã§ä½¿ç”¨ã™ã‚‹å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã€`main`ã‚¿ã‚°å†…ã«Pythonã‚³ãƒ¼ãƒ‰ã®å‡¦ç†çµæœã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ã‚’è¿½åŠ ã€`py-script`ã‚¿ã‚°å†…ã§Irisãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãƒ­ãƒ¼ãƒ‰ã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã‚„ã™ã„ã‚ˆã†`pandas.DataFrame`ã¸ã®å¤‰æ›ã€ã‚¢ãƒ¤ãƒ¡ã®ç¨®é¡ã¨ãŒãã®é•·ã•ã€å¹…ã®é–¢ä¿‚ã‚’æ•£å¸ƒå›³ã§ãƒ—ãƒ­ãƒƒãƒˆã€ãã®çµæœã‚’htmlã«æå†™ã¨ã„ã†æµã‚Œã«ãªã£ã¦ã„ã¾ã™ã€‚`pandas.DataFrame`ã®è¡¨ç¤ºã¯Jupyter Labãªã©ã¨é•ã£ã¦å°‘ã—è¦‹ã«ãã„æ„Ÿã˜ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿åˆ†æã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒHTMLå†…ã«è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã¯ãªã‹ãªã‹å¤¢ãŒã‚ã‚Šã¾ã™ã­ã€‚

## Pythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦HTMLå†…ã§ä½¿ç”¨ã™ã‚‹

HTMLã£ã¦ã‚³ãƒ¼ãƒ‰ãŒé•·ããªã‚ŠãŒã¡ã§ã€ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãªã‚“ã‹ã‚‚åˆã‚ã›ã‚‹ã¨ã”ã¡ã‚ƒã”ã¡ã‚ƒåº¦ãŒå¢—ã—ã¦å«Œã ã€‚ã¨ã„ã†æ–¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚è‡ªåˆ†ã‚‚HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ã«ã‚‰ã‚ã£ã“ã™ã‚‹ã®ã¯ã‚ã¾ã‚Šå¥½ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚“ãªHTMLãƒ•ã‚¡ã‚¤ãƒ«å†…ã«Pythonã‚³ãƒ¼ãƒ‰ãªã‚“ã¦æ›¸ã„ã¦ã„ãŸã‚‰ä½™è¨ˆè¤‡é›‘ã«ãªã‚‹...ã¨é ­ã‚’æŠ±ãˆã¦ã„ã‚‹æ–¹ã«æœ—å ±ã§ã™ã€‚ãªã‚“ã¨ã“ã®PyScriptã€Pythonã‚³ãƒ¼ãƒ‰ã¯`.py`ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦è¨˜è¿°ã—ã¦ãŠãã€ãã‚Œã‚’HTMLå†…ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

ã¾ãšã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```
.
â”œâ”€â”€ index.html
â””â”€â”€ modules
    â”œâ”€â”€ create_graph.py
    â””â”€â”€ create_irisdata.py
```

`py-script`å†…ã§è¨˜è¿°ã—ã¦ã„ãŸ`display_graph`ã‚„`display_irisdata`ã«ã¤ã„ã¦ã€ãã‚Œãã‚Œã‚°ãƒ©ãƒ•ä½œæˆå‡¦ç†ã®éƒ¨åˆ†ã‚’åˆ‡ã‚Šå‡ºã—ã€`create_graph.py`ã€`create_irisdata.py`å†…ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚

```python:create_graph.py
import numpy as np
from numpy import pi, sin, cos
import matplotlib.pyplot as plt

def create_graph(*ags, **kwgs):
    t = np.arange(0,2*pi,0.01)
    x = 16*sin(t)**3
    y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t)
    fig, ax = plt.subplots()
    ax.fill_between(x, y, facecolor='red', alpha=0.5)

    return fig

```

```python:create_irisdata.py
from sklearn import datasets
import pandas as pd
import matplotlib.pyplot as plt

dataset = datasets.load_iris()

def create_irisdata(*ags, **kwgs):
    df = pd.DataFrame(dataset.data, columns=dataset.feature_names)

    fig, ax = plt.subplots()
    ax.scatter(x=dataset.data[dataset.target==0, 0],
              y=dataset.data[dataset.target==0, 1],
              label=dataset.target_names[0],
              c='blue')
    ax.scatter(x=dataset.data[dataset.target==1, 0],
              y=dataset.data[dataset.target==1, 1],
              label=dataset.target_names[1],
              c='red')
    ax.scatter(x=dataset.data[dataset.target==2, 0],
              y=dataset.data[dataset.target==2, 1],
              label=dataset.target_names[2],
              c='green')

    ax.legend(loc='best', fontsize=14)

    ax.set_title('Iris SepalLength / SepalWidth', size=16)
    ax.set_xlabel(dataset.feature_names[0], size=14)
    ax.set_ylabel(dataset.feature_names[1], size=14)

    return df, fig

```

ç¶šã„ã¦ã€`index.html`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```html:index.html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-env>
      - numpy
      - matplotlib
      - scikit-learn
      - pandas
      - paths:
        - ./modules/create_graph.py
        - ./modules/create_irisdata.py
    </py-env>
    <title>PyScript Playground</title>
  </head>

  <body>
    <main class="py-5 grid gap-y-4 grid-cols-1 place-items-center">
      <p id="title" class="text-center"></p>
      <py-button id="graph-button" label="ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º"></py-button>
      <div id="graph-container"></div>
      <py-button id="iris-button" label="Irisãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’åˆ†æ"></py-button>
      <div id="iris-container">
        <p id="data-description"></p>
        <div id="plot-area"></div>
      </div>
    </main>

    <py-script output="title">
import platform

print('I love PyScript')
print('Python version: {}'.format(platform.python_version()))
    </py-script>
    <py-script>
from create_graph import create_graph

graph_button = Element('graph-button')

def display_graph(*ags, **kwgs):
    fig = create_graph()
    pyscript.write('graph-container', fig)

graph_button.element.onclick = display_graph
    </py-script>
    <py-script>
from create_irisdata import create_irisdata

iris_button = Element('iris-button')

def display_irisdata(*ags, **kwgs):
    df, fig = create_irisdata()
    pyscript.write('data-description', df.head())
    pyscript.write('plot-area', fig)

iris_button.element.onclick = display_irisdata
    </py-script>

  </body>

</html>

```

`py-script`ã‚¿ã‚°ã®ä¸­ãŒçµæ§‹ã‚¹ãƒƒã‚­ãƒªã—ãŸæ°—ãŒã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã‚Œã§ã¯ã€`index.html`ã«ã¤ã„ã¦ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```html
<py-env>
  - numpy
  - matplotlib
  - scikit-learn
  - pandas
  - paths:
    - ./modules/create_graph.py
    - ./modules/create_irisdata.py
</py-env>
```

ã¾ãšã€åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®Pythonã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€`py-env`ã‚¿ã‚°å†…ã§`- paths:`ã¨ã—ã¦ã€ãã‚Œä»¥é™ã«ä½¿ç”¨ã—ãŸã„Pythonãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã«æ³¨æ„ï¼‰ã€‚ãã—ã¦ã€ã“ã‚Œã‚‚é‡è¦ãªã®ã§ã™ãŒã€å„Pythonãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚å…¨ã¦è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```html
<py-script output="title">
import platform

print('I love PyScript')
print('Python version: {}'.format(platform.python_version()))
</py-script>
<py-script>
from create_graph import create_graph

graph_button = Element('graph-button')

def display_graph(*ags, **kwgs):
    fig = create_graph()
    pyscript.write('graph-container', fig)

graph_button.element.onclick = display_graph
</py-script>
<py-script>
from create_irisdata import create_irisdata

iris_button = Element('iris-button')

def display_irisdata(*ags, **kwgs):
    df, fig = create_irisdata()
    pyscript.write('data-description', df.head())
    pyscript.write('plot-area', fig)

iris_button.element.onclick = display_irisdata
</py-script>
```

 ã‚ã¨ã¯ã„ã¤ã‚‚é€šã‚Šã«`py-script`ã‚¿ã‚°å†…ã§å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ä»»æ„ã®å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã ã‘ã«ãªã‚Šã¾ã™ã€‚

 ã“ã‚Œã§HTMLãƒ•ã‚¡ã‚¤ãƒ«ãŒPythonã‚³ãƒ¼ãƒ‰ã§ã‚°ãƒãƒ£ã‚°ãƒãƒ£ã«ãªã‚‹ã®ãŒå°‘ã—ã¯å›é¿ã§ãã‚‹ã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚ãã‚Œã¨ã€ã“ã‚Œã¯PyScriptãŒç™ºè¡¨ã•ã‚Œã¦é–“ã‚‚ãªã„ã“ã¨ã‚‚å½±éŸ¿ã—ã¦ã„ã¾ã™ãŒã€HTMLãƒ•ã‚¡ã‚¤ãƒ«ã§Pythonã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨è‡ªå‹•è£œå®Œã‚„è‡ªå‹•æ•´å½¢ãŒåŠ¹ã‹ãªã„ã®ã§`.py`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§è¨˜è¿°ã™ã‚‹ã“ã¨ã§å¿«é©ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¨˜äº‹ã®ä¸­ã§ã‚‚è¨€åŠã—ãŸã‚ˆã†ã«`py-script`ã‚¿ã‚°ã¯å®Œå…¨ã«Pythonã‚³ãƒ¼ãƒ‰ãªã®ã§ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚‚`#`ã‚’ä½¿ç”¨ã—ã¾ã™ã—ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã«ã‚‚æ³¨æ„ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã€`.py`ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã®ã¯ã¨ã¦ã‚‚æ¥½ã§ã—ãŸã€‚

# ã¾ã¨ã‚

ã•ã¦ã€ã“ã“ã¾ã§PyScriptã§éŠã‚“ã§ãã¾ã—ãŸãŒã€å®Ÿéš›ã®ã¨ã“ã‚ã€ç¾çŠ¶ã®PyScriptã‚’ä½¿ç”¨ã—ãŸãƒšãƒ¼ã‚¸ã¯è¡¨ç¤ºé€Ÿåº¦ãŒã‹ãªã‚Šé…ãï¼ˆä»Šå›ã®ãƒšãƒ¼ã‚¸ã§èª­ã¿è¾¼ã¿ã«10ç§’ã»ã©ã‹ã‹ã‚‹ï¼‰ã€å¯¾å¿œã—ã¦ã„ã‚‹å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚OpenCVã‚„seabornãŒãªã„ãªã©ã¾ã ã¾ã æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã¯é ã„ã‹ãªã¨ã„ã†æ„Ÿã˜ã‚‚ã—ã¾ã™ã€‚ãŸã ã€Pythonã®å„ªç§€ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©æµã‚’HTMLå½¢å¼ã§ç°¡å˜ã«è‰²ã€…ãªäººã«å±Šã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€ä»Šå¾Œã®PyScriptã¯ã‹ãªã‚Šæ¥½ã—ã¿ã ãªã¨æ€ã„ã¾ã—ãŸã€‚

ãã‚Œã§ã¯ã€æœ€å¾Œã«ä»Šå›ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„å…¬å¼ã‚µã‚¤ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ãªã©ã‚’ç´¹ä»‹ã—ã¦çµ‚ã‚ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚

# ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚„å…¬å¼ã‚µã‚¤ãƒˆãªã©ã®ç´¹ä»‹

- ä»Šå›ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦VSCodeã®Live Serverãªã©ã§ç°¡å˜ã«ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://github.com/zoniha/pyscript-playground

- PyScriptå…¬å¼ã‚µã‚¤ãƒˆ

https://pyscript.net

- PyScriptã‚µãƒ³ãƒ—ãƒ«ãƒšãƒ¼ã‚¸é›†
PyScriptã‚’ä½¿ç”¨ã—ã¦ä½œæˆã•ã‚ŒãŸæ§˜ã€…ãªãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://pyscript.net/examples

- PyScriptã®GitHub
docsã®ä¸­ãªã©ã«ã€å…¬å¼ã‚µã‚¤ãƒˆãªã©ã«è¨˜è¼‰ã®ãªã„ä½¿ç”¨æ–¹æ³•ãªã©ã«ã¤ã„ã¦è¨˜è¿°ã•ã‚Œã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã€ã‚ˆã‚Šæ·±ãPyScriptã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯è¦‹ã¦ã¿ã‚‹ã“ã¨ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚

https://github.com/pyscript/pyscript


ä»¥ä¸Šã€PyScriptã§éŠã‚“ã§ã¿ãŸè©±ã§ã—ãŸã€‚
æœ€å¾Œã¾ã§ãŠèª­ã¿ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
